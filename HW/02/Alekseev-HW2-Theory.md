## Условие

Есть физическая машина (десктоп или сервер, архитектура x86-64) с установленным на неё работоспособным Linux-ом. Машина "заточена" под выполнение определённых задач. Пусть, для определённости, там стоит CentOS 7 и установлен (стандартным образом, через yum) web-сервер nginx. В начальный момент машина выключена. Описать как можно подробно, что происходит на машине с момента нажатия кнопки питания до того момента, когда nginx начинает отвечать на запросы. (Что происходит с момента отправки запроса до получения ответа от web-сервера, вы рассматривали в рамках задания к занятию 1.) 

## Источники

* Интернет

  * [howstuffworks.com](https://computer.howstuffworks.com/web-server.htm)

  * <a name="bib:medium"></a>[medium.com](https://medium.com/@jgefroh/a-guide-to-using-nginx-for-static-websites-d96a9d034940)

* Kurose, Ross - Computer Networking. A Top-Down Approach (pp. 495–500)

## Введение

Несколько слов про веб-сервера из того, что нашёл, пока гулял по Интернету :)

О веб-сервере можно думать как о программе, которая получает GET запрос от клиента, с именем запрашиваемого файла, находит этот файл и отправляет ответом клиенту.

У nginx есть один главный и несколько рабочих процессов. Основная задача главного процесса — чтение и проверка конфигурации и управление рабочими процессами, распределение запросов между ними. Так называемый asynchronous, event-driven approach. Что делает nginx популярным веб-сервером для сайтов с большим числом запросов.

## Что происходит

Считаем (как и в одной из предыдущих задач, про ввод URL в браузере), что ноутбук с web сервером подключён к кабелю Ethernet, который подключён к Ethernet свичу, который подключён к роутеру, который соединён с ISP, который предоставляет и DNS услуги; DHCP сервер находится в роутере.

Чтобы web сервер начал отвечать на запросы пользователей, надо сопоставить его имени IP-адрес (считаем при этом, что вся информация, которую собирается предоставлять nginx сервер, уже собрана, структурирована и ссылки на неё добавлены в конфигурационные файлы).

* ОС создаёт DHCP сообщение,

  * погружает его в UPD сегмент (порт DHCP сервера 67, порт DHCP клиента 68), который
  * оборачивается IP датаграмой (широковещательный IP адрес назначения 255.255.255.255 и IP адрес источника 0.0.0.0), которая далее
  * кладётся в Ethernet frame (с широковещательным MAC адресом назначения FF:FF:FF:FF:FF:FF — чтобы frame была доставлена всем устройствам, подключённым к свичу, включая DHCP сервер — и MAC адресом источника, равным MAC адресу ноутбука)

* Ethernet frame отправляется свичу, и рассылается по всем его портам, на одном из которых находится роутер с DHCP сервером

* Роутер получает Ethernet frame, извлекает IP датаграму, UDP сегмент, и DHCP сообщение

* DHCP сервер резервирует IP адрес для web сервера, создаёт DHCP сообщение с этим IP адресом, IP адресом DNS сервера, IP адресом роутера, маской подсети

  Сообщение кладётся в UDP сегмент, в IP датаграму, в Ethernet frame (MAC адрес источника — адрес роутера, MAC адрес цели — MAC адрес машины)

* Через свич сообщение доходит до машины, где распаковывается, и DHCP клиент запоминает присвоенный серверу IP адрес

Правда, в [статье](#bib:medium) говорится, что (в случае сервера nginx, по крайней мере) настройку отображения domain name в IP адрес надо проводить самому "вручную", а потом указать и имя, и IP адрес в конфигурационном файле. Поэтому, возможно, что перечисленные выше пункты это не то, что ожидалось в задании :)